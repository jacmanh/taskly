enum TaskStatus {
  TODO
  IN_PROGRESS
  DONE
}

enum TaskPriority {
  LOW
  MEDIUM
  HIGH
}

model Task {
  id          String       @id @default(cuid())
  title       String
  description String?
  status      TaskStatus   @default(TODO)
  priority    TaskPriority @default(MEDIUM)
  dueDate     DateTime?

  projectId   String
  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)

  assignedToId  String?
  assignedTo  User?    @relation(fields: [assignedToId], references: [id], onDelete: SetNull)

  sprintId    String?
  sprint      Sprint?  @relation(fields: [sprintId], references: [id], onDelete: SetNull)

  createdById String
  createdBy   User     @relation("TaskCreator", fields: [createdById], references: [id], onDelete: Cascade)

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  deletedAt   DateTime?

  @@index([projectId])
  @@index([assignedToId])
  @@index([sprintId])
  @@index([createdById])
  @@index([deletedAt])
  @@map("tasks")
}
